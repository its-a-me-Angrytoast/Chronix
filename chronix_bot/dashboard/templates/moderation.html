{% extends "base.html" %}
{% block content %}
  <h1>Moderation Logs</h1>
  <p class="lead">Recent moderation events recorded by the bot.</p>
  <div id="mod-list"></div>
  <script>
    async function loadMods(){
      const res = await fetch('/moderation/logs'); if(!res.ok) return;
      const j = await res.json(); const logs = j.logs || [];
      const el = document.getElementById('mod-list'); el.innerHTML='';
      if(logs.length===0) el.innerHTML = '<p class="lead">No moderation logs found.</p>';
      logs.forEach(l=>{ const div=document.createElement('div'); div.className='note'; div.innerHTML = `<div><strong>${l.get('action')}</strong> by ${l.get('by')||'unknown'} <small>${new Date((l.ts||0)*1000).toLocaleString()}</small></div><pre style="white-space:pre-wrap;margin:0">${JSON.stringify(l,null,2)}</pre>`; el.appendChild(div); });
    }
    document.addEventListener('DOMContentLoaded', loadMods);
  </script>
{% endblock %}
